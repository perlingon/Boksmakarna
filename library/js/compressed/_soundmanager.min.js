// @codekit-append /libs/soundmanager2-jsmin.js
// @codekit-append /page-player.js
/* **********************************************
     Begin soundmanager2-jsmin.js
********************************************** *//** @license


 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20130512
*/function PagePlayer(){var e=this,t=this,n=soundManager,r,i=null,s=null,o=document.getElementsByTagName("head")[0],u=null,a=navigator.userAgent,f=a.match(/(opera|firefox)/i),l=a.match(/ipad|ipod|iphone/i),c;this.config={usePeakData:!1,useWaveformData:!1,useEQData:!1,fillGraph:!1,allowRightClick:!0,useThrottling:!0,autoStart:!1,playNext:!1,updatePageTitle:!1,emptyTime:"-:--",useFavIcon:!1};this.css={sDefault:"sm2_link",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"};var h=function(e){while(e){if(e==document)return!0;e=e.parentNode}return!1},p=document.getElementById("main-player");this.sounds=[];this.soundsByObject=[];this.lastSound=null;this.soundCount=0;this.strings=[];this.dragActive=!1;this.dragExec=new Date;this.dragTimer=null;this.pageTitle=document.title;this.lastWPExec=new Date;this.lastWLExec=new Date;this.vuMeterData=[];this.oControls=null;this._mergeObjects=function(e,t){var n={},r,i,s;for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);r=typeof t=="undefined"?{}:t;for(s in r)typeof n[s]=="undefined"&&(n[s]=r[s]);return n};r=function(){function r(n){var r=t.call(n),i=r.length;if(e){r[1]="on"+r[1];i>3&&r.pop()}else i===3&&r.push(!1);return r}function i(t,r){var i=t.shift(),s=[n[r]];e?i[s](t[0],t[1]):i[s].apply(i,t)}function s(){i(r(arguments),"add")}function o(){i(r(arguments),"remove")}var e=window.attachEvent&&!window.addEventListener,t=Array.prototype.slice,n={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};return{add:s,remove:o}}();this.hasClass=function(e,t){return typeof e.className!="undefined"?(new RegExp("(^|\\s)"+t+"(\\s|$)")).test(e.className):!1};this.addClass=function(t,n){if(!t||!n||e.hasClass(t,n))return!1;t.className=(t.className?t.className+" ":"")+n};this.removeClass=function(t,n){if(!t||!n||!e.hasClass(t,n))return!1;t.className=t.className.replace(new RegExp("( "+n+")|("+n+")","g"),"")};this.select=function(t,n){var r=e.getByClassName(t,"div",n||null);return r?r[0]:null};this.getByClassName=document.querySelectorAll?function(e,t,n){var r="."+e,i;t&&(t=t.split(" "));i=t.length>1?t.join(r+", "):t[0]+r;return(n?n:document).querySelectorAll(i)}:function(t,n,r){var i=r?r:document,s=[],o,u,a=[];n&&(n=n.split(" "));if(n instanceof Array){for(o=n.length;o--;)if(!a||!a[n[o]])a[n[o]]=i.getElementsByTagName(n[o]);for(o=n.length;o--;)for(u=a[n[o]].length;u--;)e.hasClass(a[n[o]][u],t)&&s.push(a[n[o]][u])}else{a=i.all||i.getElementsByTagName("*");for(o=0,u=a.length;o<u;o++)e.hasClass(a[o],t)&&s.push(a[o])}return s};this.isChildOfClass=function(t,n){if(!t||!n)return!1;while(t.parentNode&&!e.hasClass(t,n))t=t.parentNode;return e.hasClass(t,n)};this.getParentByNodeName=function(e,t){if(!e||!t)return!1;t=t.toLowerCase();while(e.parentNode&&t!==e.parentNode.nodeName.toLowerCase())e=e.parentNode;return e.parentNode&&t===e.parentNode.nodeName.toLowerCase()?e.parentNode:null};this.getOffX=function(e){var t=0;if(e.offsetParent)while(e.offsetParent){t+=e.offsetLeft;e=e.offsetParent}else e.x&&(t+=e.x);return t};this.getTime=function(e,t){var n=Math.floor(e/1e3),r=Math.floor(n/60),i=n-r*60;return t?r+":"+(i<10?"0"+i:i):{min:r,sec:i}};this.getSoundByObject=function(t){return typeof e.soundsByObject[t.id]!="undefined"?e.soundsByObject[t.id]:null};this.getPreviousItem=function(e){if(e.previousElementSibling)e=e.previousElementSibling;else{e=e.previousSibling;while(e&&e.previousSibling&&e.previousSibling.nodeType!==1)e=e.previousSibling}return e.nodeName.toLowerCase()!=="li"?null:e.getElementsByTagName("a")[0]};this.playPrevious=function(n){n||(n=e.lastSound);if(!n)return!1;var r=e.getPreviousItem(n._data.oLI);r&&t.handleClick({target:r});return r};this.getNextItem=function(e){if(e.nextElementSibling)e=e.nextElementSibling;else{e=e.nextSibling;while(e&&e.nextSibling&&e.nextSibling.nodeType!==1)e=e.nextSibling}return e.nodeName.toLowerCase()!=="li"?null:e.getElementsByTagName("a")[0]};this.playNext=function(n){n||(n=e.lastSound);if(!n)return!1;var r=e.getNextItem(n._data.oLI);r&&t.handleClick({target:r});return r};this.setPageTitle=function(t){if(!e.config.updatePageTitle)return!1;try{document.title=(t?t+" - ":"")+e.pageTitle}catch(n){e.setPageTitle=function(){return!1}}};this.events={play:function(){t.removeClass(this._data.oLI,this._data.className);this._data.className=t.css.sPlaying;t.addClass(this._data.oLI,this._data.className);e.setPageTitle(this._data.originalTitle);h(p)&&jQuery(document).ready(function(e){})},stop:function(){t.removeClass(this._data.oLI,this._data.className);this._data.className="";this._data.oPosition.style.width="0px";e.setPageTitle();e.resetPageIcon()},pause:function(){if(t.dragActive)return!1;t.removeClass(this._data.oLI,this._data.className);this._data.className=t.css.sPaused;t.addClass(this._data.oLI,this._data.className);e.setPageTitle();e.resetPageIcon()},resume:function(){if(t.dragActive)return!1;t.removeClass(this._data.oLI,this._data.className);this._data.className=t.css.sPlaying;t.addClass(this._data.oLI,this._data.className);h(p)&&jQuery(document).ready(function(e){})},finish:function(){t.removeClass(this._data.oLI,this._data.className);this._data.className="";this._data.oPosition.style.width="0px";if(e.config.playNext){t.playNext(this);h(p)&&jQuery(document).ready(function(e){e("#episode-1").hide();e("body").on("next",function(){e(".playlist-nav .active").eq(0).removeClass("active").parent().next().find("a").addClass("active")});e("body").trigger("next")})}else{e.setPageTitle();e.resetPageIcon()}},whileloading:function(){function n(){this._data.oLoading.style.width=this.bytesLoaded/this.bytesTotal*100+"%";if(!this._data.didRefresh&&this._data.metadata){this._data.didRefresh=!0;this._data.metadata.refresh()}}if(!t.config.useThrottling)n.apply(this);else{var r=new Date;if(r&&r-e.lastWLExec>50||this.bytesLoaded===this.bytesTotal){n.apply(this);e.lastWLExec=r}}},onload:function(){if(!this.loaded){var e=this._data.oLI.getElementsByTagName("a")[0],t=e.innerHTML,r=this;e.innerHTML=t+' <span style="font-size:0.5em"> | Load failed, d\'oh! '+(n.sandbox.noRemote?" Possible cause: Flash sandbox is denying remote URL access.":n.sandbox.noLocal?"Flash denying local filesystem access":"404?")+"</span>";setTimeout(function(){e.innerHTML=t},5e3)}else this._data.metadata&&this._data.metadata.refresh()},whileplaying:function(){var r=null;if(t.dragActive||!t.config.useThrottling){e.updateTime.apply(this);if(n.flashVersion>=9){t.config.usePeakData&&this.instanceOptions.usePeakData&&e.updatePeaks.apply(this);(t.config.useWaveformData&&this.instanceOptions.useWaveformData||t.config.useEQData&&this.instanceOptions.useEQData)&&e.updateGraph.apply(this)}if(this._data.metadata){r=new Date;if(r&&r-e.lastWPExec>500){this._data.metadata.refreshMetadata(this);e.lastWPExec=r}}this._data.oPosition.style.width=this.position/e.getDurationEstimate(this)*100+"%"}else{r=new Date;if(r-e.lastWPExec>30){e.updateTime.apply(this);if(n.flashVersion>=9){t.config.usePeakData&&this.instanceOptions.usePeakData&&e.updatePeaks.apply(this);(t.config.useWaveformData&&this.instanceOptions.useWaveformData||t.config.useEQData&&this.instanceOptions.useEQData)&&e.updateGraph.apply(this)}this._data.metadata&&this._data.metadata.refreshMetadata(this);this._data.oPosition.style.width=this.position/e.getDurationEstimate(this)*100+"%";e.lastWPExec=r}}}};this.setPageIcon=function(t){if(!e.config.useFavIcon||!e.config.usePeakData||!t)return!1;var n=document.getElementById("sm2-favicon");if(n){o.removeChild(n);n=null}if(!n){n=document.createElement("link");n.id="sm2-favicon";n.rel="shortcut icon";n.type="image/png";n.href=t;document.getElementsByTagName("head")[0].appendChild(n)}};this.resetPageIcon=function(){if(!e.config.useFavIcon)return!1;var t=document.getElementById("favicon");t&&(t.href="/favicon.ico")};this.updatePeaks=function(){var t=this._data.oPeak,r=t.getElementsByTagName("span");r[0].style.marginTop=13-Math.floor(15*this.peakData.left)+"px";r[1].style.marginTop=13-Math.floor(15*this.peakData.right)+"px";n.flashVersion>8&&e.config.useFavIcon&&e.config.usePeakData&&e.setPageIcon(e.vuMeterData[parseInt(16*this.peakData.left,10)][parseInt(16*this.peakData.right,10)])};this.updateGraph=function(){if(t.config.flashVersion<9||!t.config.useWaveformData&&!t.config.useEQData)return!1;var e=this._data.oGraph.getElementsByTagName("div"),n,r,i;if(t.config.useWaveformData){n=8;for(r=255;r--;)e[255-r].style.marginTop=1+n+Math.ceil(this.waveformData.left[r]*-n)+"px"}else{i=9;for(r=255;r--;)e[255-r].style.marginTop=i*2-1+Math.ceil(this.eqData[r]*-i)+"px"}};this.resetGraph=function(){if(!t.config.useEQData||t.config.flashVersion<9)return!1;var e=this._data.oGraph.getElementsByTagName("div"),n=t.config.useEQData?"17px":"9px",r=t.config.fillGraph?"32px":"1px",i;for(i=255;i--;){e[255-i].style.marginTop=n;e[255-i].style.height=r}};this.updateTime=function(){var t=e.strings.timing.replace("%s1",e.getTime(this.position,!0));t=t.replace("%s2",e.getTime(e.getDurationEstimate(this),!0));this._data.oTiming.innerHTML=t};this.getTheDamnTarget=function(e){return e.target||(window.event?window.event.srcElement:null)};this.withinStatusBar=function(t){return e.isChildOfClass(t,"playlist")&&e.isChildOfClass(t,"controls")};this.handleClick=function(r){if(r.button===2){t.config.allowRightClick||t.stopEvent(r);return t.config.allowRightClick}var i=e.getTheDamnTarget(r),s,o,a,f,l,c;if(!i)return!0;e.dragActive&&e.stopDrag();if(e.withinStatusBar(i))return!1;i.nodeName.toLowerCase()!=="a"&&(i=e.getParentByNodeName(i,"a"));if(!i)return!0;s=i.getAttribute("href");if(!i.href||!n.canPlayLink(i)&&!e.hasClass(i,"playable")||e.hasClass(i,"exclude"))return!0;e.initUL(e.getParentByNodeName(i,"ul"));e.initItem(i);o=i.href;a=e.getSoundByObject(i);if(a){e.setPageTitle(a._data.originalTitle);if(a===e.lastSound)a.readyState!==2?a.playState!==1?a.play():a.togglePause():n._writeDebug("Warning: sound failed to load (security restrictions, 404 or bad format)",2);else{e.lastSound&&e.stopSound(e.lastSound);u&&a._data.oTimingBox.appendChild(u);a.togglePause()}}else{a=n.createSound({id:i.id,url:decodeURI(o),onplay:e.events.play,onstop:e.events.stop,onpause:e.events.pause,onresume:e.events.resume,onfinish:e.events.finish,type:i.type||null,whileloading:e.events.whileloading,whileplaying:e.events.whileplaying,onmetadata:e.events.metadata,onload:e.events.onload});f=e.oControls.cloneNode(!0);l=i.parentNode;l.appendChild(f);u&&l.appendChild(u);e.soundsByObject[i.id]=a;a._data={oLink:i,oLI:l,oControls:e.select("controls",l),oStatus:e.select("statusbar",l),oLoading:e.select("loading",l),oPosition:e.select("position",l),oTimingBox:e.select("timing",l),oTiming:e.select("timing",l).getElementsByTagName("div")[0],oPeak:e.select("peak",l),oGraph:e.select("spectrum-box",l),className:e.css.sPlaying,originalTitle:i.innerHTML,metadata:null};u&&a._data.oTimingBox.appendChild(u);a._data.oLI.getElementsByTagName("ul").length&&(a._data.metadata=new Metadata(a));c=e.strings.timing.replace("%s1",e.config.emptyTime);c=c.replace("%s2",e.config.emptyTime);a._data.oTiming.innerHTML=c;e.sounds.push(a);e.lastSound&&e.stopSound(e.lastSound);e.resetGraph.apply(a);a.play()}e.lastSound=a;return e.stopEvent(r)};this.handleMouseDown=function(n){l&&n.touches&&(n=n.touches[0]);if(n.button===2){t.config.allowRightClick||t.stopEvent(n);return t.config.allowRightClick}var i=e.getTheDamnTarget(n);if(!i)return!0;if(!e.withinStatusBar(i))return!0;e.dragActive=!0;e.lastSound.pause();e.setPosition(n);l?r.add(document,"touchmove",e.handleMouseMove):r.add(document,"mousemove",e.handleMouseMove);e.addClass(e.lastSound._data.oControls,"dragging");return e.stopEvent(n)};this.handleMouseMove=function(t){l&&t.touches&&(t=t.touches[0]);if(e.dragActive)if(e.config.useThrottling){var n=new Date;if(n-e.dragExec>20)e.setPosition(t);else{window.clearTimeout(e.dragTimer);e.dragTimer=window.setTimeout(function(){e.setPosition(t)},20)}e.dragExec=n}else e.setPosition(t);else e.stopDrag();t.stopPropagation=!0;return!1};this.stopDrag=function(n){if(e.dragActive){e.removeClass(e.lastSound._data.oControls,"dragging");l?r.remove(document,"touchmove",e.handleMouseMove):r.remove(document,"mousemove",e.handleMouseMove);t.hasClass(e.lastSound._data.oLI,e.css.sPaused)||e.lastSound.resume();e.dragActive=!1;return e.stopEvent(n)}};this.handleStatusClick=function(n){e.setPosition(n);t.hasClass(e.lastSound._data.oLI,e.css.sPaused)||e.resume();return e.stopEvent(n)};this.stopEvent=function(e){if(typeof e!="undefined")if(typeof e.preventDefault!="undefined")e.preventDefault();else{e.stopPropagation=!0;e.returnValue=!1}return!1};this.setPosition=function(t){var n=e.getTheDamnTarget(t),r,i,s,o;if(!n)return!0;i=n;while(!e.hasClass(i,"controls")&&i.parentNode)i=i.parentNode;s=e.lastSound;r=parseInt(t.clientX,10);o=Math.floor((r-e.getOffX(i)-4)/i.offsetWidth*e.getDurationEstimate(s));isNaN(o)||(o=Math.min(o,s.duration));isNaN(o)||s.setPosition(o)};this.stopSound=function(e){n._writeDebug("stopping sound: "+e.id);n.stop(e.id);l||n.unload(e.id)};this.getDurationEstimate=function(e){return e.instanceOptions.isMovieStar?e.duration:!e._data.metadata||!e._data.metadata.data.givenDuration?e.durationEstimate||0:e._data.metadata.data.givenDuration};this.createVUData=function(){var t=0,n=0,r=i.getContext("2d"),s=r.createLinearGradient(0,16,0,0),o,u;s.addColorStop(0,"rgb(0,192,0)");s.addColorStop(.3,"rgb(0,255,0)");s.addColorStop(.625,"rgb(255,255,0)");s.addColorStop(.85,"rgb(255,0,0)");o=r.createLinearGradient(0,16,0,0);u="rgba(0,0,0,0.2)";o.addColorStop(0,u);o.addColorStop(1,"rgba(0,0,0,0.5)");for(t=0;t<16;t++)e.vuMeterData[t]=[];for(t=0;t<16;t++)for(n=0;n<16;n++){i.setAttribute("width",16);i.setAttribute("height",16);r.fillStyle=o;r.fillRect(0,0,7,15);r.fillRect(8,0,7,15);r.fillStyle=s;r.fillRect(0,15-t,7,16-(16-t));r.fillRect(8,15-n,7,16-(16-n));r.clearRect(0,3,16,1);r.clearRect(0,7,16,1);r.clearRect(0,11,16,1);e.vuMeterData[t][n]=i.toDataURL("image/png")}};this.testCanvas=function(){var e=document.createElement("canvas"),t=null,n;if(!e||typeof e.getContext=="undefined")return null;t=e.getContext("2d");if(!t||typeof e.toDataURL!="function")return null;try{n=e.toDataURL("image/png")}catch(r){return null}return e};this.initItem=function(t){t.id||(t.id="pagePlayerMP3Sound"+e.soundCount++);e.addClass(t,e.css.sDefault)};this.initUL=function(t){n.flashVersion>=9&&e.addClass(t,e.cssBase)};this.init=function(o){function b(t){r[t](document,"click",e.handleClick);if(!l){r[t](document,"mousedown",e.handleMouseDown);r[t](document,"mouseup",e.stopDrag)}else{r[t](document,"touchstart",e.handleMouseDown);r[t](document,"touchend",e.stopDrag)}r[t](window,"unload",c)}if(o){n._writeDebug("pagePlayer.init(): Using custom configuration");this.config=this._mergeObjects(o,this.config)}else n._writeDebug("pagePlayer.init(): Using default configuration");var a,d,v,m,g,y;this.cssBase=[];n.useFlashBlock=!0;if(n.flashVersion>=9){n.defaultOptions.usePeakData=this.config.usePeakData;n.defaultOptions.useWaveformData=this.config.useWaveformData;n.defaultOptions.useEQData=this.config.useEQData;this.config.usePeakData&&this.cssBase.push("use-peak");(this.config.useWaveformData||this.config.useEQData)&&this.cssBase.push("use-spectrum");this.cssBase=this.cssBase.join(" ");if(this.config.useFavIcon){i=e.testCanvas();i&&f?e.createVUData():this.config.useFavIcon=!1}}else(this.config.usePeakData||this.config.useWaveformData||this.config.useEQData)&&n._writeDebug("Page player: Note: soundManager.flashVersion = 9 is required for peak/waveform/EQ features.");s=document.createElement("div");s.innerHTML=['  <div class="controls">','   <div class="statusbar">','    <div class="loading"></div>','    <div class="position"></div>',"   </div>","  </div>",'  <div class="timing">','   <div id="sm2_timing" class="timing-data">','    <span class="sm2_position">%s1</span> / <span class="sm2_total">%s2</span>',"   </div>","  </div>",'  <div class="peak">','   <div class="peak-box"><span class="l"></span><span class="r"></span></div>',"  </div>",' <div class="spectrum-container">','  <div class="spectrum-box">','   <div class="spectrum"></div>',"  </div>"," </div>"].join("\n");if(n.flashVersion>=9){u=e.select("spectrum-container",s);u=s.removeChild(u);d=e.select("spectrum-box",u);v=d.getElementsByTagName("div")[0];m=document.createDocumentFragment();g=null;for(a=256;a--;){g=v.cloneNode(!1);g.style.left=a+"px";m.appendChild(g)}d.removeChild(v);d.appendChild(m)}else{s.removeChild(e.select("spectrum-container",s));s.removeChild(e.select("peak",s))}e.oControls=s.cloneNode(!0);y=e.select("timing-data",s);e.strings.timing=y.innerHTML;y.innerHTML="";y.id="";c=function(){b("remove")};b("add");n._writeDebug("pagePlayer.init(): Ready",1);e.config.autoStart&&t.handleClick({target:t.getByClassName("playlist","ul")[0].getElementsByTagName("a")[0]});h(p)&&jQuery(document).ready(function(e){e(".playlist-nav a").each(function(n){e(this).click(function(){t.handleClick({target:t.getByClassName("main","ul")[0].getElementsByTagName("a")[n]})})})})}}(function(e,t){function n(n,r){function i(e){return u.preferFlash&&Ht&&!u.ignoreFlash&&u.flash[e]!==t&&u.flash[e]}function s(e){return function(t){var n=this._s;!n||!n._a?(n&&n.id?u._wD(n.id+": Ignoring "+t.type):u._wD(l+"Ignoring "+t.type),t=null):t=e.call(this,t);return t}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"};this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100};this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}};this.movieID="sm2-container";this.id=r||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20130512";this.altURL=this.movieURL=this.version=null;this.enabled=this.swfLoaded=!1;this.oMC=null;this.sounds={};this.soundIDs=[];this.didFlashBlock=this.muted=!1;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.ignoreFlash=this.html5Only=!1;var o,u=this,a=null,f=null,l="HTML5::",c,p=navigator.userAgent,d=e.location.href.toString(),v=document,m,y,b,w,E=[],S=!0,x,T=!1,N=!1,C=!1,k=!1,L=!1,A,O=0,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z=["log","info","warn","error"],et,tt,nt,rt=null,it=null,st,ot,ut,at,ft,lt,ct,ht,pt=!1,dt=!1,vt,mt,gt,yt=0,bt=null,wt,Et=[],St,xt=null,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t=Array.prototype.slice,Dt=!1,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut=0,zt=p.match(/(ipad|iphone|ipod)/i),Wt=p.match(/android/i),Xt=p.match(/msie/i),Vt=p.match(/webkit/i),$t=p.match(/safari/i)&&!p.match(/chrome/i),Jt=p.match(/opera/i),Kt=p.match(/firefox/i),Qt=p.match(/(mobile|pre\/|xoom)/i)||zt||Wt,Gt=!d.match(/usehtml5audio/i)&&!d.match(/sm2\-ignorebadua/i)&&$t&&!p.match(/silk/i)&&p.match(/OS X 10_6_([3-7])/i),Yt=e.console!==t&&console.log!==t,Zt=v.hasFocus!==t?v.hasFocus():null,en=$t&&(v.hasFocus===t||!v.hasFocus()),tn=!en,nn=/(mp3|mp4|mpa|m4a|m4b)/i,rn=v.location?v.location.protocol.match(/http/i):null,sn=rn?"":"http://",on=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,un="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),an=RegExp("\\.("+un.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!rn;var fn;try{fn=Audio!==t&&(Jt&&opera!==t&&10>opera.version()?new Audio(null):new Audio).canPlayType!==t}catch(ln){fn=!1}this.hasHTML5=fn;this.setup=function(e){var n=!u.url;e!==t&&C&&xt&&u.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)&&ct(st("setupLate"));D(e);e&&(n&&$&&e.url!==t&&u.beginDelayedInit(),!$&&e.url!==t&&"complete"===v.readyState&&setTimeout(X,1));return u};this.supported=this.ok=function(){return xt?C&&!k:u.useHTML5Audio&&u.hasHTML5};this.getMovie=function(t){return c(t)||v[t]||e[t]};this.createSound=function(e,n){function r(){s=ft(s);u.sounds[s.id]=new o(s);u.soundIDs.push(s.id);return u.sounds[s.id]}var i,s;i=null;i="soundManager.createSound(): "+st(C?"notOK":"notReady");if(!C||!u.ok())return ct(i),!1;n!==t&&(e={id:e,url:n});s=_(e);s.url=wt(s.url);void 0===s.id&&(s.id=u.setupOptions.idPrefix+Ut++);s.id.toString().charAt(0).match(/^[0-9]$/)&&u._wD("soundManager.createSound(): "+st("badID",s.id),2);u._wD("soundManager.createSound(): "+s.id+(s.url?" ("+s.url+")":""),1);if(ht(s.id,!0))return u._wD("soundManager.createSound(): "+s.id+" exists",1),u.sounds[s.id];if(Nt(s))i=r(),u._wD(s.id+": Using HTML5"),i._setup_html5(s);else{if(u.html5Only)return u._wD(s.id+": No HTML5 support for this sound, and no Flash. Exiting."),r();if(u.html5.usingFlash&&s.url&&s.url.match(/data\:/i))return u._wD(s.id+": data: URIs not supported via Flash. Exiting."),r();8<w&&(null===s.isMovieStar&&(s.isMovieStar=!!s.serverURL||!!(s.type&&s.type.match(on)||s.url&&s.url.match(an))),s.isMovieStar&&(u._wD("soundManager.createSound(): using MovieStar handling"),1<s.loops&&A("noNSLoop")));s=lt(s,"soundManager.createSound(): ");i=r();8===w?f._createSound(s.id,s.loops||1,s.usePolicyFile):(f._createSound(s.id,s.url,s.usePeakData,s.useWaveformData,s.useEQData,s.isMovieStar,s.isMovieStar?s.bufferTime:!1,s.loops||1,s.serverURL,s.duration||null,s.autoPlay,!0,s.autoLoad,s.usePolicyFile),s.serverURL||(i.connected=!0,s.onconnect&&s.onconnect.apply(i)));!s.serverURL&&(s.autoLoad||s.autoPlay)&&i.load(s)}!s.serverURL&&s.autoPlay&&i.play();return i};this.destroySound=function(e,t){if(!ht(e))return!1;var n=u.sounds[e],r;n._iO={};n.stop();n.unload();for(r=0;r<u.soundIDs.length;r++)if(u.soundIDs[r]===e){u.soundIDs.splice(r,1);break}t||n.destruct(!0);delete u.sounds[e];return!0};this.load=function(e,t){return ht(e)?u.sounds[e].load(t):!1};this.unload=function(e){return ht(e)?u.sounds[e].unload():!1};this.onposition=this.onPosition=function(e,t,n,r){return ht(e)?u.sounds[e].onposition(t,n,r):!1};this.clearOnPosition=function(e,t,n){return ht(e)?u.sounds[e].clearOnPosition(t,n):!1};this.start=this.play=function(e,t){var n=null,r=t&&!(t instanceof Object);if(!C||!u.ok())return ct("soundManager.play(): "+st(C?"notOK":"notReady")),!1;if(ht(e,r))r&&(t={url:t});else{if(!r)return!1;r&&(t={url:t});t&&t.url&&(u._wD('soundManager.play(): Attempting to create "'+e+'"',1),t.id=e,n=u.createSound(t).play())}null===n&&(n=u.sounds[e].play(t));return n};this.setPosition=function(e,t){return ht(e)?u.sounds[e].setPosition(t):!1};this.stop=function(e){if(!ht(e))return!1;u._wD("soundManager.stop("+e+")",1);return u.sounds[e].stop()};this.stopAll=function(){var e;u._wD("soundManager.stopAll()",1);for(e in u.sounds)u.sounds.hasOwnProperty(e)&&u.sounds[e].stop()};this.pause=function(e){return ht(e)?u.sounds[e].pause():!1};this.pauseAll=function(){var e;for(e=u.soundIDs.length-1;0<=e;e--)u.sounds[u.soundIDs[e]].pause()};this.resume=function(e){return ht(e)?u.sounds[e].resume():!1};this.resumeAll=function(){var e;for(e=u.soundIDs.length-1;0<=e;e--)u.sounds[u.soundIDs[e]].resume()};this.togglePause=function(e){return ht(e)?u.sounds[e].togglePause():!1};this.setPan=function(e,t){return ht(e)?u.sounds[e].setPan(t):!1};this.setVolume=function(e,t){return ht(e)?u.sounds[e].setVolume(t):!1};this.mute=function(e){var t=0;e instanceof String&&(e=null);if(e){if(!ht(e))return!1;u._wD('soundManager.mute(): Muting "'+e+'"');return u.sounds[e].mute()}u._wD("soundManager.mute(): Muting all sounds");for(t=u.soundIDs.length-1;0<=t;t--)u.sounds[u.soundIDs[t]].mute();return u.muted=!0};this.muteAll=function(){u.mute()};this.unmute=function(e){e instanceof String&&(e=null);if(e){if(!ht(e))return!1;u._wD('soundManager.unmute(): Unmuting "'+e+'"');return u.sounds[e].unmute()}u._wD("soundManager.unmute(): Unmuting all sounds");for(e=u.soundIDs.length-1;0<=e;e--)u.sounds[u.soundIDs[e]].unmute();u.muted=!1;return!0};this.unmuteAll=function(){u.unmute()};this.toggleMute=function(e){return ht(e)?u.sounds[e].toggleMute():!1};this.getMemoryUse=function(){var e=0;f&&8!==w&&(e=parseInt(f._getMemoryUse(),10));return e};this.disable=function(n){var r;n===t&&(n=!1);if(k)return!1;k=!0;A("shutdown",1);for(r=u.soundIDs.length-1;0<=r;r--)et(u.sounds[u.soundIDs[r]]);M(n);Mt.remove(e,"load",j);return!0};this.canPlayMIME=function(e){var t;u.hasHTML5&&(t=Ct({type:e}));!t&&xt&&(t=e&&u.ok()?!!(8<w&&e.match(on)||e.match(u.mimePattern)):null);return t};this.canPlayURL=function(e){var t;u.hasHTML5&&(t=Ct({url:e}));!t&&xt&&(t=e&&u.ok()?!!e.match(u.filePattern):null);return t};this.canPlayLink=function(e){return e.type!==t&&e.type&&u.canPlayMIME(e.type)?!0:u.canPlayURL(e.href)};this.getSoundById=function(e,t){if(!e)return null;var n=u.sounds[e];!n&&!t&&u._wD('soundManager.getSoundById(): Sound "'+e+'" not found.',2);return n};this.onready=function(t,n){if("function"!=typeof t)throw st("needFunction","onready");C&&u._wD(st("queue","onready")),n||(n=e),H("onready",t,n),B();return!0};this.ontimeout=function(t,n){if("function"!=typeof t)throw st("needFunction","ontimeout");C&&u._wD(st("queue","ontimeout")),n||(n=e),H("ontimeout",t,n),B({type:"ontimeout"});return!0};this._writeDebug=function(e,n){var r,i;if(!u.debugMode)return!1;if(Yt&&u.useConsole){n&&"object"==typeof n?console.log(e,n):Z[n]!==t?console[Z[n]](e):console.log(e);if(u.consoleOnly)return!0}r=c("soundmanager-debug");if(!r)return!1;i=v.createElement("div");0===++O%2&&(i.className="sm2-alt");n=n===t?0:parseInt(n,10);i.appendChild(v.createTextNode(e));n&&(2<=n&&(i.style.fontWeight="bold"),3===n&&(i.style.color="#ff3333"));r.insertBefore(i,r.firstChild);return!0};-1!==d.indexOf("sm2-debug=alert")&&(this._writeDebug=function(t){e.alert(t)});this._wD=this._writeDebug;this._debug=function(){var e,t;A("currentObj",1);e=0;for(t=u.soundIDs.length;e<t;e++)u.sounds[u.soundIDs[e]]._debug()};this.reboot=function(t,n){u.soundIDs.length&&u._wD("Destroying "+u.soundIDs.length+" SMSound object"+(1!==u.soundIDs.length?"s":"")+"...");var r,i,s;for(r=u.soundIDs.length-1;0<=r;r--)u.sounds[u.soundIDs[r]].destruct();if(f)try{Xt&&(it=f.innerHTML),rt=f.parentNode.removeChild(f)}catch(o){A("badRemove",2)}it=rt=xt=f=null;u.enabled=$=C=pt=dt=T=N=k=Dt=u.swfLoaded=!1;u.soundIDs=[];u.sounds={};Ut=0;if(t)E=[];else for(r in E)if(E.hasOwnProperty(r)){i=0;for(s=E[r].length;i<s;i++)E[r][i].fired=!1}n||u._wD("soundManager: Rebooting...");u.html5={usingFlash:null};u.flash={};u.html5Only=!1;u.ignoreFlash=!1;e.setTimeout(function(){W();n||u.beginDelayedInit()},20);return u};this.reset=function(){A("reset");return u.reboot(!0,!0)};this.getMoviePercent=function(){return f&&"PercentLoaded"in f?f.PercentLoaded():null};this.beginDelayedInit=function(){L=!0;X();setTimeout(function(){if(dt)return!1;K();z();return dt=!0},20);F()};this.destruct=function(){u._wD("soundManager.destruct()");u.disable(!0)};o=function(e){var n,r,i=this,s,o,l,c,h,p,d=!1,v=[],m=0,y,b,E=null,S;r=n=null;this.sID=this.id=e.id;this.url=e.url;this._iO=this.instanceOptions=this.options=_(e);this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=!1;this._a=null;S=this.url?!1:!0;this.id3={};this._debug=function(){u._wD(i.id+": Merged options:",i.options)};this.load=function(e){var n=null,r;e!==t?i._iO=_(e,i.options):(e=i.options,i._iO=e,E&&E!==i.url&&(A("manURL"),i._iO.url=i.url,i.url=null));i._iO.url||(i._iO.url=i.url);i._iO.url=wt(i._iO.url);r=i.instanceOptions=i._iO;u._wD(i.id+": load ("+r.url+")");if(!r.url&&!i.url)return u._wD(i.id+": load(): url is unassigned. Exiting.",2),i;!i.isHTML5&&8===w&&!i.url&&!r.autoPlay&&u._wD(i.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1);if(r.url===i.url&&0!==i.readyState&&2!==i.readyState)return A("onURL",1),3===i.readyState&&r.onload&&Rt(i,function(){r.onload.apply(i,[!!i.duration])}),i;i.loaded=!1;i.readyState=1;i.playState=0;i.id3={};if(Nt(r))n=i._setup_html5(r),n._called_load?u._wD(i.id+": Ignoring request to load again"):(i._html5_canplay=!1,i.url!==r.url&&(u._wD(A("manURL")+": "+r.url),i._a.src=r.url,i.setPosition(0)),i._a.autobuffer="auto",i._a.preload="auto",i._a._called_load=!0,r.autoPlay&&i.play());else{if(u.html5Only)return u._wD(i.id+": No flash support. Exiting."),i;if(i._iO.url&&i._iO.url.match(/data\:/i))return u._wD(i.id+": data: URIs not supported via Flash. Exiting."),i;try{i.isHTML5=!1,i._iO=lt(ft(r)),r=i._iO,8===w?f._load(i.id,r.url,r.stream,r.autoPlay,r.usePolicyFile):f._load(i.id,r.url,!!r.stream,!!r.autoPlay,r.loops||1,!!r.autoLoad,r.usePolicyFile)}catch(s){A("smError",2),x("onload",!1),Q({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}i.url=r.url;return i};this.unload=function(){0!==i.readyState&&(u._wD(i.id+": unload()"),i.isHTML5?(c(),i._a&&(i._a.pause(),E=Lt(i._a))):8===w?f._unload(i.id,"about:blank"):f._unload(i.id),s());return i};this.destruct=function(e){u._wD(i.id+": Destruct");i.isHTML5?(c(),i._a&&(i._a.pause(),Lt(i._a),Dt||l(),i._a._s=null,i._a=null)):(i._iO.onfailure=null,f._destroySound(i.id));e||u.destroySound(i.id,!0)};this.start=this.play=function(e,n){var r,s,o,a,l,c=!0,c=null;r=i.id+": play(): ";n=n===t?!0:n;e||(e={});i.url&&(i._iO.url=i.url);i._iO=_(i._iO,i.options);i._iO=_(e,i._iO);i._iO.url=wt(i._iO.url);i.instanceOptions=i._iO;if(!i.isHTML5&&i._iO.serverURL&&!i.connected)return i.getAutoPlay()||(u._wD(r+" Netstream not connected yet - setting autoPlay"),i.setAutoPlay(!0)),i;Nt(i._iO)&&(i._setup_html5(i._iO),h());1===i.playState&&!i.paused&&((s=i._iO.multiShot)?u._wD(r+"Already playing (multi-shot)",1):(u._wD(r+"Already playing (one-shot)",1),i.isHTML5&&i.setPosition(i._iO.position),c=i));if(null!==c)return c;e.url&&e.url!==i.url&&(!i.readyState&&!i.isHTML5&&8===w&&S?S=!1:i.load(i._iO));i.loaded?u._wD(r.substr(0,r.lastIndexOf(":"))):0===i.readyState?(u._wD(r+"Attempting to load"),!i.isHTML5&&!u.html5Only?(i._iO.autoPlay=!0,i.load(i._iO)):i.isHTML5?i.load(i._iO):(u._wD(r+"Unsupported type. Exiting."),c=i),i.instanceOptions=i._iO):2===i.readyState?(u._wD(r+"Could not load - exiting",2),c=i):u._wD(r+"Loading - attempting to play...");if(null!==c)return c;!i.isHTML5&&9===w&&0<i.position&&i.position===i.duration&&(u._wD(r+"Sound at end, resetting to position:0"),e.position=0);if(i.paused&&0<=i.position&&(!i._iO.serverURL||0<i.position))u._wD(r+"Resuming from paused state",1),i.resume();else{i._iO=_(e,i._iO);if(null!==i._iO.from&&null!==i._iO.to&&0===i.instanceCount&&0===i.playState&&!i._iO.serverURL){s=function(){i._iO=_(e,i._iO);i.play(i._iO)};i.isHTML5&&!i._html5_canplay?(u._wD(r+"Beginning load for from/to case"),i.load({oncanplay:s}),c=!1):!i.isHTML5&&!i.loaded&&(!i.readyState||2!==i.readyState)&&(u._wD(r+"Preloading for from/to case"),i.load({onload:s}),c=!1);if(null!==c)return c;i._iO=b()}(!i.instanceCount||i._iO.multiShotEvents||i.isHTML5&&i._iO.multiShot&&!Dt||!i.isHTML5&&8<w&&!i.getAutoPlay())&&i.instanceCount++;i._iO.onposition&&0===i.playState&&p(i);i.playState=1;i.paused=!1;i.position=i._iO.position!==t&&!isNaN
(i._iO.position)?i._iO.position:0;i.isHTML5||(i._iO=lt(ft(i._iO)));i._iO.onplay&&n&&(i._iO.onplay.apply(i),d=!0);i.setVolume(i._iO.volume,!0);i.setPan(i._iO.pan,!0);i.isHTML5?2>i.instanceCount?(h(),r=i._setup_html5(),i.setPosition(i._iO.position),r.play()):(u._wD(i.id+": Cloning Audio() for instance #"+i.instanceCount+"..."),o=new Audio(i._iO.url),a=function(){Mt.remove(o,"onended",a);i._onfinish(i);Lt(o);o=null},l=function(){Mt.remove(o,"canplay",l);try{o.currentTime=i._iO.position/1e3}catch(e){ct(i.id+": multiShot play() failed to apply position of "+i._iO.position/1e3)}o.play()},Mt.add(o,"ended",a),i._iO.position?Mt.add(o,"canplay",l):o.play()):(c=f._start(i.id,i._iO.loops||1,9===w?i.position:i.position/1e3,i._iO.multiShot||!1),9===w&&!c&&(u._wD(r+"No sound hardware, or 32-sound ceiling hit",2),i._iO.onplayerror&&i._iO.onplayerror.apply(i)))}return i};this.stop=function(e){var t=i._iO;1===i.playState&&(u._wD(i.id+": stop()"),i._onbufferchange(0),i._resetOnPosition(0),i.paused=!1,i.isHTML5||(i.playState=0),y(),t.to&&i.clearOnPosition(t.to),i.isHTML5?i._a&&(e=i.position,i.setPosition(0),i.position=e,i._a.pause(),i.playState=0,i._onTimer(),c()):(f._stop(i.id,e),t.serverURL&&i.unload()),i.instanceCount=0,i._iO={},t.onstop&&t.onstop.apply(i));return i};this.setAutoPlay=function(e){u._wD(i.id+": Autoplay turned "+(e?"on":"off"));i._iO.autoPlay=e;i.isHTML5||(f._setAutoPlay(i.id,e),e&&!i.instanceCount&&1===i.readyState&&(i.instanceCount++,u._wD(i.id+": Incremented instance count to "+i.instanceCount)))};this.getAutoPlay=function(){return i._iO.autoPlay};this.setPosition=function(e){e===t&&(e=0);var n=i.isHTML5?Math.max(e,0):Math.min(i.duration||i._iO.duration,Math.max(e,0));i.position=n;e=i.position/1e3;i._resetOnPosition(i.position);i._iO.position=n;if(i.isHTML5){if(i._a){if(i._html5_canplay){if(i._a.currentTime!==e){u._wD(i.id+": setPosition("+e+")");try{i._a.currentTime=e,(0===i.playState||i.paused)&&i._a.pause()}catch(r){u._wD(i.id+": setPosition("+e+") failed: "+r.message,2)}}}else if(e)return u._wD(i.id+": setPosition("+e+"): Cannot seek yet, sound not ready",2),i;i.paused&&i._onTimer(!0)}}else e=9===w?i.position:e,i.readyState&&2!==i.readyState&&f._setPosition(i.id,e,i.paused||!i.playState,i._iO.multiShot);return i};this.pause=function(e){if(i.paused||0===i.playState&&1!==i.readyState)return i;u._wD(i.id+": pause()");i.paused=!0;i.isHTML5?(i._setup_html5().pause(),c()):(e||e===t)&&f._pause(i.id,i._iO.multiShot);i._iO.onpause&&i._iO.onpause.apply(i);return i};this.resume=function(){var e=i._iO;if(!i.paused)return i;u._wD(i.id+": resume()");i.paused=!1;i.playState=1;i.isHTML5?(i._setup_html5().play(),h()):(e.isMovieStar&&!e.serverURL&&i.setPosition(i.position),f._pause(i.id,e.multiShot));!d&&e.onplay?(e.onplay.apply(i),d=!0):e.onresume&&e.onresume.apply(i);return i};this.togglePause=function(){u._wD(i.id+": togglePause()");if(0===i.playState)return i.play({position:9===w&&!i.isHTML5?i.position:i.position/1e3}),i;i.paused?i.resume():i.pause();return i};this.setPan=function(e,n){e===t&&(e=0);n===t&&(n=!1);i.isHTML5||f._setPan(i.id,e);i._iO.pan=e;n||(i.pan=e,i.options.pan=e);return i};this.setVolume=function(e,n){e===t&&(e=100);n===t&&(n=!1);i.isHTML5?i._a&&(i._a.volume=Math.max(0,Math.min(1,e/100))):f._setVolume(i.id,u.muted&&!i.muted||i.muted?0:e);i._iO.volume=e;n||(i.volume=e,i.options.volume=e);return i};this.mute=function(){i.muted=!0;i.isHTML5?i._a&&(i._a.muted=!0):f._setVolume(i.id,0);return i};this.unmute=function(){i.muted=!1;var e=i._iO.volume!==t;i.isHTML5?i._a&&(i._a.muted=!1):f._setVolume(i.id,e?i._iO.volume:i.options.volume);return i};this.toggleMute=function(){return i.muted?i.unmute():i.mute()};this.onposition=this.onPosition=function(e,n,r){v.push({position:parseInt(e,10),method:n,scope:r!==t?r:i,fired:!1});return i};this.clearOnPosition=function(e,t){var n;e=parseInt(e,10);if(isNaN(e))return!1;for(n=0;n<v.length;n++)e===v[n].position&&(!t||t===v[n].method)&&(v[n].fired&&m--,v.splice(n,1))};this._processOnPosition=function(){var e,t;e=v.length;if(!e||!i.playState||m>=e)return!1;for(e-=1;0<=e;e--)t=v[e],!t.fired&&i.position>=t.position&&(t.fired=!0,m++,t.method.apply(t.scope,[t.position]));return!0};this._resetOnPosition=function(e){var t,n;t=v.length;if(!t)return!1;for(t-=1;0<=t;t--)n=v[t],n.fired&&e<=n.position&&(n.fired=!1,m--);return!0};b=function(){var e=i._iO,t=e.from,n=e.to,r,s;s=function(){u._wD(i.id+': "To" time of '+n+" reached.");i.clearOnPosition(n,s);i.stop()};r=function(){u._wD(i.id+': Playing "from" '+t);null!==n&&!isNaN(n)&&i.onPosition(n,s)};null!==t&&!isNaN(t)&&(e.position=t,e.multiShot=!1,r());return e};p=function(){var e,t=i._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&i.onPosition(parseInt(e,10),t[e])};y=function(){var e,t=i._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&i.clearOnPosition(parseInt(e,10))};h=function(){i.isHTML5&&vt(i)};c=function(){i.isHTML5&&mt(i)};s=function(e){e||(v=[],m=0);d=!1;i._hasTimer=null;i._a=null;i._html5_canplay=!1;i.bytesLoaded=null;i.bytesTotal=null;i.duration=i._iO&&i._iO.duration?i._iO.duration:null;i.durationEstimate=null;i.buffered=[];i.eqData=[];i.eqData.left=[];i.eqData.right=[];i.failures=0;i.isBuffering=!1;i.instanceOptions={};i.instanceCount=0;i.loaded=!1;i.metadata={};i.readyState=0;i.muted=!1;i.paused=!1;i.peakData={left:0,right:0};i.waveformData={left:[],right:[]};i.playState=0;i.position=null;i.id3={}};s();this._onTimer=function(e){var t,s=!1,o={};if(i._hasTimer||e){i._a&&(e||(0<i.playState||1===i.readyState)&&!i.paused)&&(t=i._get_html5_duration(),t!==n&&(n=t,i.duration=t,s=!0),i.durationEstimate=i.duration,t=1e3*i._a.currentTime||0,t!==r&&(r=t,s=!0),(s||e)&&i._whileplaying(t,o,o,o,o));return s}};this._get_html5_duration=function(){var e=i._iO;return(e=i._a&&i._a.duration?1e3*i._a.duration:e&&e.duration?e.duration:null)&&!isNaN(e)&&Infinity!==e?e:null};this._apply_loop=function(e,t){!e.loop&&1<t&&u._wD("Note: Native HTML5 looping is infinite.",1);e.loop=1<t?"loop":""};this._setup_html5=function(e){e=_(i._iO,e);var t=Dt?a:i._a,n=decodeURI(e.url),r;Dt?n===decodeURI(Pt)&&(r=!0):n===decodeURI(E)&&(r=!0);if(t){if(t._s)if(Dt)t._s&&t._s.playState&&!r&&t._s.stop();else if(!Dt&&n===decodeURI(E))return i._apply_loop(t,e.loops),t;r||(s(!1),t.src=e.url,Pt=E=i.url=e.url,t._called_load=!1)}else i._a=e.autoLoad||e.autoPlay?new Audio(e.url):Jt&&10>opera.version()?new Audio(null):new Audio,t=i._a,t._called_load=!1,Dt&&(a=t);i.isHTML5=!0;i._a=t;t._s=i;o();i._apply_loop(t,e.loops);e.autoLoad||e.autoPlay?i.load():(t.autobuffer=!1,t.preload="auto");return t};o=function(){if(i._a._added_events)return!1;var e;i._a._added_events=!0;for(e in Ft)Ft.hasOwnProperty(e)&&i._a&&i._a.addEventListener(e,Ft[e],!1);return!0};l=function(){var e;u._wD(i.id+": Removing event listeners");i._a._added_events=!1;for(e in Ft)Ft.hasOwnProperty(e)&&i._a&&i._a.removeEventListener(e,Ft[e],!1)};this._onload=function(e){var t=!!e||!i.isHTML5&&8===w&&i.duration;e=i.id+": ";u._wD(e+(t?"onload()":"Failed to load / invalid sound?"+(i.duration?" -":" Zero-length duration reported.")+" ("+i.url+")"),t?1:2);!t&&!i.isHTML5&&(!0===u.sandbox.noRemote&&u._wD(e+st("noNet"),1),!0===u.sandbox.noLocal&&u._wD(e+st("noLocal"),1));i.loaded=t;i.readyState=t?3:2;i._onbufferchange(0);i._iO.onload&&Rt(i,function(){i._iO.onload.apply(i,[t])});return!0};this._onbufferchange=function(e){if(0===i.playState||e&&i.isBuffering||!e&&!i.isBuffering)return!1;i.isBuffering=1===e;i._iO.onbufferchange&&(u._wD(i.id+": Buffer state change: "+e),i._iO.onbufferchange.apply(i));return!0};this._onsuspend=function(){i._iO.onsuspend&&(u._wD(i.id+": Playback suspended"),i._iO.onsuspend.apply(i));return!0};this._onfailure=function(e,t,n){i.failures++;u._wD(i.id+": Failures = "+i.failures);i._iO.onfailure&&1===i.failures?i._iO.onfailure(i,e,t,n):u._wD(i.id+": Ignoring failure")};this._onfinish=function(){var e=i._iO.onfinish;i._onbufferchange(0);i._resetOnPosition(0);i.instanceCount&&(i.instanceCount--,i.instanceCount||(y(),i.playState=0,i.paused=!1,i.instanceCount=0,i.instanceOptions={},i._iO={},c(),i.isHTML5&&(i.position=0)),(!i.instanceCount||i._iO.multiShotEvents)&&e)&&(u._wD(i.id+": onfinish()"),Rt(i,function(){e.apply(i)}))};this._whileloading=function(e,t,n,r){var s=i._iO;i.bytesLoaded=e;i.bytesTotal=t;i.duration=Math.floor(n);i.bufferLength=r;i.durationEstimate=!i.isHTML5&&!s.isMovieStar?s.duration?i.duration>s.duration?i.duration:s.duration:parseInt(i.bytesTotal/i.bytesLoaded*i.duration,10):i.duration;i.isHTML5||(i.buffered=[{start:0,end:i.duration}]);(3!==i.readyState||i.isHTML5)&&s.whileloading&&s.whileloading.apply(i)};this._whileplaying=function(e,n,r,s,o){var u=i._iO;if(isNaN(e)||null===e)return!1;i.position=Math.max(0,e);i._processOnPosition();!i.isHTML5&&8<w&&(u.usePeakData&&n!==t&&n&&(i.peakData={left:n.leftPeak,right:n.rightPeak}),u.useWaveformData&&r!==t&&r&&(i.waveformData={left:r.split(","),right:s.split(",")}),u.useEQData&&o!==t&&o&&o.leftEQ&&(e=o.leftEQ.split(","),i.eqData=e,i.eqData.left=e,o.rightEQ!==t&&o.rightEQ&&(i.eqData.right=o.rightEQ.split(","))));1===i.playState&&(!i.isHTML5&&8===w&&!i.position&&i.isBuffering&&i._onbufferchange(0),u.whileplaying&&u.whileplaying.apply(i));return!0};this._oncaptiondata=function(e){u._wD(i.id+": Caption data received.");i.captiondata=e;i._iO.oncaptiondata&&i._iO.oncaptiondata.apply(i,[e])};this._onmetadata=function(e,t){u._wD(i.id+": Metadata received.");var n={},r,s;r=0;for(s=e.length;r<s;r++)n[e[r]]=t[r];i.metadata=n;i._iO.onmetadata&&i._iO.onmetadata.apply(i)};this._onid3=function(e,t){u._wD(i.id+": ID3 data received.");var n=[],r,s;r=0;for(s=e.length;r<s;r++)n[e[r]]=t[r];i.id3=_(i.id3,n);i._iO.onid3&&i._iO.onid3.apply(i)};this._onconnect=function(e){e=1===e;u._wD(i.id+": "+(e?"Connected.":"Failed to connect? - "+i.url),e?1:2);if(i.connected=e)i.failures=0,ht(i.id)&&(i.getAutoPlay()?i.play(t,i.getAutoPlay()):i._iO.autoLoad&&i.load()),i._iO.onconnect&&i._iO.onconnect.apply(i,[e])};this._ondataerror=function(e){0<i.playState&&(u._wD(i.id+": Data error: "+e),i._iO.ondataerror&&i._iO.ondataerror.apply(i))};this._debug()};J=function(){return v.body||v._docElement||v.getElementsByTagName("div")[0]};c=function(e){return v.getElementById(e)};_=function(e,n){var r=e||{},i,s;i=n===t?u.defaultOptions:n;for(s in i)i.hasOwnProperty(s)&&r[s]===t&&(r[s]="object"!=typeof i[s]||null===i[s]?i[s]:_(r[s],i[s]));return r};Rt=function(t,n){!t.isHTML5&&8===w?e.setTimeout(n,0):n()};P={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};D=function(e,n){var r,i=!0,s=n!==t,o=u.setupOptions;if(e===t){i=[];for(r in o)o.hasOwnProperty(r)&&i.push(r);for(r in P)P.hasOwnProperty(r)&&("object"==typeof u[r]?i.push(r+": {...}"):u[r]instanceof Function?i.push(r+": function() {...}"):i.push(r));u._wD(st("setup",i.join(", ")));return!1}for(r in e)if(e.hasOwnProperty(r))if("object"!=typeof e[r]||null===e[r]||e[r]instanceof Array||e[r]instanceof RegExp)s&&P[n]!==t?u[n][r]=e[r]:o[r]!==t?(u.setupOptions[r]=e[r],u[r]=e[r]):P[r]===t?(ct(st(u[r]===t?"setupUndef":"setupError",r),2),i=!1):u[r]instanceof Function?u[r].apply(u,e[r]instanceof Array?e[r]:[e[r]]):u[r]=e[r];else{if(P[r]!==t)return D(e[r],r);ct(st(u[r]===t?"setupUndef":"setupError",r),2),i=!1}return i};Mt=function(){function t(e){e=_t.call(e);var t=e.length;r?(e[1]="on"+e[1],3<t&&e.pop()):3===t&&e.push(!1);return e}function n(e,t){var n=e.shift(),s=[i[t]];r?n[s](e[0],e[1]):n[s].apply(n,e)}var r=e.attachEvent,i={add:r?"attachEvent":"addEventListener",remove:r?"detachEvent":"removeEventListener"};return{add:function(){n(t(arguments),"add")},remove:function(){n(t(arguments),"remove")}}}();Ft={abort:s(function(){u._wD(this._s.id+": abort")}),canplay:s(function(){var e=this._s,n;if(e._html5_canplay)return!0;e._html5_canplay=!0;u._wD(e.id+": canplay");e._onbufferchange(0);n=e._iO.position!==t&&!isNaN(e._iO.position)?e._iO.position/1e3:null;if(e.position&&this.currentTime!==n){u._wD(e.id+": canplay: Setting position to "+n);try{this.currentTime=n}catch(r){u._wD(e.id+": canplay: Setting position of "+n+" failed: "+r.message,2)}}e._iO._oncanplay&&e._iO._oncanplay()}),canplaythrough:s(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:s(function(){var e=this._s;u._wD(e.id+": ended");e._onfinish()}),error:s(function(){u._wD(this._s.id+": HTML5 error, code "+this.error.code);this._s._onload(!1)}),loadeddata:s(function(){var e=this._s;u._wD(e.id+": loadeddata");!e._loaded&&!$t&&(e.duration=e._get_html5_duration())}),loadedmetadata:s(function(){u._wD(this._s.id+": loadedmetadata")}),loadstart:s(function(){u._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),play:s(function(){this._s._onbufferchange(0)}),playing:s(function(){u._wD(this._s.id+": playing");this._s._onbufferchange(0)}),progress:s(function(e){var t=this._s,n,r,i;n=0;var s="progress"===e.type,o=e.target.buffered,a=e.loaded||0,f=e.total||1;t.buffered=[];if(o&&o.length){n=0;for(r=o.length;n<r;n++)t.buffered.push({start:1e3*o.start(n),end:1e3*o.end(n)});n=1e3*(o.end(0)-o.start(0));a=Math.min(1,n/(1e3*e.target.duration));if(s&&1<o.length){i=[];r=o.length;for(n=0;n<r;n++)i.push(1e3*e.target.buffered.start(n)+"-"+1e3*e.target.buffered.end(n));u._wD(this._s.id+": progress, timeRanges: "+i.join(", "))}s&&!isNaN(a)&&u._wD(this._s.id+": progress, "+Math.floor(100*a)+"% loaded")}isNaN(a)||(t._onbufferchange(0),t._whileloading(a,f,t._get_html5_duration()),a&&f&&a===f&&Ft.canplaythrough.call(this,e))}),ratechange:s(function(){u._wD(this._s.id+": ratechange")}),suspend:s(function(e){var t=this._s;u._wD(this._s.id+": suspend");Ft.progress.call(this,e);t._onsuspend()}),stalled:s(function(){u._wD(this._s.id+": stalled")}),timeupdate:s(function(){this._s._onTimer()}),waiting:s(function(){var e=this._s;u._wD(this._s.id+": waiting");e._onbufferchange(1)})};Nt=function(e){return!e||!e.type&&!e.url&&!e.serverURL?!1:e.serverURL||e.type&&i(e.type)?!1:e.type?Ct({type:e.type}):Ct({url:e.url})||u.html5Only||e.url.match(/data\:/i)};Lt=function(e){var t;e&&(t=$t&&!zt?null:Kt?"about:blank":null,e.src=t,void 0!==e._called_unload&&(e._called_load=!1));Dt&&(Pt=null);return t};Ct=function(e){if(!u.useHTML5Audio||!u.hasHTML5)return!1;var n=e.url||null;e=e.type||null;var r=u.audioFormats,s;if(e&&u.html5[e]!==t)return u.html5[e]&&!i(e);if(!kt){kt=[];for(s in r)r.hasOwnProperty(s)&&(kt.push(s),r[s].related&&(kt=kt.concat(r[s].related)));kt=RegExp("\\.("+kt.join("|")+")(\\?.*)?$","i")}s=n?n.toLowerCase().match(kt):null;!s||!s.length?e&&(n=e.indexOf(";"),s=(-1!==n?e.substr(0,n):e).substr(6)):s=s[1];s&&u.html5[s]!==t?n=u.html5[s]&&!i(s):(e="audio/"+s,n=u.html5.canPlayType({type:e}),n=(u.html5[s]=n)&&u.html5[e]&&!i(e));return n};Ot=function(){function e(e){var t,r,i=t=!1;if(!n||"function"!=typeof n.canPlayType)return t;if(e instanceof Array){t=0;for(r=e.length;t<r;t++)if(u.html5[e[t]]||n.canPlayType(e[t]).match(u.html5Test))i=!0,u.html5[e[t]]=!0,u.flash[e[t]]=!!e[t].match(nn);t=i}else e=n&&"function"==typeof n.canPlayType?n.canPlayType(e):!1,t=!!e&&!!e.match(u.html5Test);return t}if(!u.useHTML5Audio||!u.hasHTML5)return xt=u.html5.usingFlash=!0,!1;var n=Audio!==t?Jt&&10>opera.version()?new Audio(null):new Audio:null,r,i,s={},o;o=u.audioFormats;for(r in o)if(o.hasOwnProperty(r)&&(i="audio/"+r,s[r]=e(o[r].type),s[i]=s[r],r.match(nn)?(u.flash[r]=!0,u.flash[i]=!0):(u.flash[r]=!1,u.flash[i]=!1),o[r]&&o[r].related))for(i=o[r].related.length-1;0<=i;i--)s["audio/"+o[r].related[i]]=s[r],u.html5[o[r].related[i]]=s[r],u.flash[o[r].related[i]]=s[r];s.canPlayType=n?e:null;u.html5=_(u.html5,s);u.html5.usingFlash=Tt();xt=u.html5.usingFlash;return!0};U={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+v.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."};st=function(){var e=_t.call(arguments),t=e.shift(),t=U&&U[t]?U[t]:"",n,r;if(t&&e&&e.length){n=0;for(r=e.length;n<r;n++)t=t.replace("%s",e[n])}return t};ft=function(e){8===w&&1<e.loops&&e.stream&&(A("as2loop"),e.stream=!1);return e};lt=function(e,t){e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(u._wD((t||"")+st("policy")),e.usePolicyFile=!0);return e};ct=function(e){Yt&&console.warn!==t?console.warn(e):u._wD(e)};m=function(){return!1};et=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=m)};tt=function(e){e===t&&(e=!1);(k||e)&&u.disable(e)};nt=function(e){var t=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+u.movieURL;u.noSWFCache&&(e+="?ts="+(new Date).getTime());return e};q=function(){w=parseInt(u.flashVersion,10);8!==w&&9!==w&&(u._wD(st("badFV",w,8)),u.flashVersion=w=8);var e=u.debugMode||u.debugFlash?"_debug.swf":".swf";u.useHTML5Audio&&!u.html5Only&&u.audioFormats.mp4.required&&9>w&&(u._wD(st("needfl9")),u.flashVersion=w=9);u.version=u.versionNumber+(u.html5Only?" (HTML5-only mode)":9===w?" (AS3/Flash 9)":" (AS2/Flash 8)");8<w?(u.defaultOptions=_(u.defaultOptions,u.flash9Options),u.features.buffering=!0,u.defaultOptions=_(u.defaultOptions,u.movieStarOptions),u.filePatterns.flash9=RegExp("\\.(mp3|"+un.join("|")+")(\\?.*)?$","i"),u.features.movieStar=!0):u.features.movieStar=!1;u.filePattern=u.filePatterns[8!==w?"flash9":"flash8"];u.movieURL=(8===w?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e);u.features.peakData=u.features.waveformData=u.features.eqData=8<w};G=function(e,t){if(!f)return!1;f._setPolling(e,t)};Y=function(){u.debugURLParam.test(d)&&(u.debugMode=!0);if(c(u.debugID))return!1;var e,t,n,r;if(u.debugMode&&!c(u.debugID)&&(!Yt||!u.useConsole||!u.consoleOnly)){e=v.createElement("div");e.id=u.debugID+"-toggle";t={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};e.appendChild(v.createTextNode("-"));e.onclick=at;e.title="Toggle SM2 debug console";p.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r]);t=v.createElement("div");t.id=u.debugID;t.style.display=u.debugMode?"block":"none";if(u.debugMode&&!c(e.id)){try{n=J(),n.appendChild(e)}catch(i){throw Error(st("domError")+" \n"+i.toString())}n.appendChild(t)}}};ht=this.getSoundById;A=function(e,t){return e?u._wD(st(e),t):""};at=function(){var e=c(u.debugID),t=c(u.debugID+"-toggle");if(!e)return!1;S?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block");S=!S};x=function(n,r,i){if(e.sm2Debugger!==t)try{sm2Debugger.handleEvent(n,r,i)}catch(s){return!1}return!0};ut=function(){var e=[];u.debugMode&&e.push("sm2_debug");u.debugFlash&&e.push("flash_debug");u.useHighPerformance&&e.push("high_performance");return e.join(" ")};ot=function(){var e=st("fbHandler"),t=u.getMoviePercent(),n={type:"FLASHBLOCK"};if(u.html5Only)return!1;u.ok()?(u.didFlashBlock&&u._wD(e+": Unblocked"),u.oMC&&(u.oMC.className=[ut(),"movieContainer","swf_loaded"+(u.didFlashBlock?" swf_unblocked":"")].join(" "))):(xt&&(u.oMC.className=ut()+" movieContainer "+(null===t?"swf_timedout":"swf_error"),u._wD(e+": "+st("fbTimeout")+(t?" ("+st("fbLoaded")+")":""))),u.didFlashBlock=!0,B({type:"ontimeout",ignoreInit:!0,error:n}),Q(n))};H=function(e,n,r){E[e]===t&&(E[e]=[]);E[e].push({method:n,scope:r||null,fired:!1})};B=function(e){e||(e={type:u.ok()?"onready":"ontimeout"});if(!C&&e&&!e.ignoreInit||"ontimeout"===e.type&&(u.ok()||k&&!e.ignoreInit))return!1;var t={success:e&&e.ignoreInit?u.ok():!k},n=e&&e.type?E[e.type]||[]:[],r=[],i,t=[t],s=xt&&!u.ok();e.error&&(t[0].error=e.error);e=0;for(i=n.length;e<i;e++)!0!==n[e].fired&&r.push(n[e]);if(r.length){e=0;for(i=r.length;e<i;e++)r[e].scope?r[e].method.apply(r[e].scope,t):r[e].method.apply(this,t),s||(r[e].fired=!0)}return!0};j=function(){e.setTimeout(function(){u.useFlashBlock&&ot();B();"function"==typeof u.onload&&(A("onload",1),u.onload.apply(e),A("onloadOK",1));u.waitForWindowLoad&&Mt.add(e,"load",j)},1)};Bt=function(){if(Ht!==t)return Ht;var n=!1,r=navigator,i=r.plugins,s,o=e.ActiveXObject;if(i&&i.length)(r=r.mimeTypes)&&r["application/x-shockwave-flash"]&&r["application/x-shockwave-flash"].enabledPlugin&&r["application/x-shockwave-flash"].enabledPlugin.description&&(n=!0);else if(o!==t&&!p.match(/MSAppHost/i)){try{s=new o("ShockwaveFlash.ShockwaveFlash")}catch(u){s=null}n=!!s}return Ht=n};Tt=function(){var e,t,n=u.audioFormats;if(zt&&p.match(/os (1|2|3_0|3_1)/i))u.hasHTML5=!1,u.html5Only=!0,u.oMC&&(u.oMC.style.display="none");else if(u.useHTML5Audio){if(!u.html5||!u.html5.canPlayType)u._wD("SoundManager: No HTML5 Audio() support detected."),u.hasHTML5=!1;Gt&&u._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(Ht?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)}if(u.useHTML5Audio&&u.hasHTML5)for(t in St=!0,n)n.hasOwnProperty(t)&&n[t].required&&(u.html5.canPlayType(n[t].type)?u.preferFlash&&(u.flash[t]||u.flash[n[t].type])&&(e=!0):(St=!1,e=!0));u.ignoreFlash&&(e=!1,St=!0);u.html5Only=u.hasHTML5&&u.useHTML5Audio&&!e;return!u.html5Only};wt=function(e){var t,n,r=0;if(e instanceof Array){t=0;for(n=e.length;t<n;t++)if(e[t]instanceof Object){if(u.canPlayMIME(e[t].type)){r=t;break}}else if(u.canPlayURL(e[t])){r=t;break}e[r].url&&(e[r]=e[r].url);e=e[r]}return e};vt=function(e){e._hasTimer||(e._hasTimer=!0,!Qt&&u.html5PollingInterval&&(null===bt&&0===yt&&(bt=setInterval(gt,u.html5PollingInterval)),yt++))};mt=function(e){e._hasTimer&&(e._hasTimer=!1,!Qt&&u.html5PollingInterval&&yt--)};gt=function(){var e;if(null!==bt&&!yt)return clearInterval(bt),bt=null,!1;for(e=u.soundIDs.length-1;0<=e;e--)u.sounds[u.soundIDs[e]].isHTML5&&u.sounds[u.soundIDs[e]]._hasTimer&&u.sounds[u.soundIDs[e]]._onTimer()};Q=function(n){n=n!==t?n:{};"function"==typeof u.onerror&&u.onerror.apply(e,[{type:n.type!==t?n.type:null}]);n.fatal!==t&&n.fatal&&u.disable()};jt=function(){if(!Gt||!Bt())return!1;var e=u.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n)&&("mp3"===n||"mp4"===n))if(u._wD("soundManager: Using flash fallback for "+n+" format"),u.html5[n]=!1,e[n]&&e[n].related)for(t=e[n].related.length-1;0<=t;t--)u.html5[e[n].related[t]]=!1};this._setSandboxType=function(e){var n=u.sandbox;n.type=e;n.description=n.types[n.types[e]!==t?e:"unknown"];"localWithFile"===n.type?(n.noRemote=!0,n.noLocal=!1,A("secNote",2)):"localWithNetwork"===n.type?(n.noRemote=!1,n.noLocal=!0):"localTrusted"===n.type&&(n.noRemote=!1,n.noLocal=!1)};this._externalInterfaceOK=function(e){if(u.swfLoaded)return!1;var t;x("swf",!0);x("flashtojs",!0);u.swfLoaded=!0;en=!1;Gt&&jt();if(!e||e.replace(/\+dev/i,"")!==u.versionNumber.replace(/\+dev/i,""))return t='soundManager: Fatal: JavaScript file build "'+u.versionNumber+'" does not match Flash SWF build "'+e+'" at '+u.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(t)},0),!1;setTimeout(b,Xt?100:1)};K=function(e,n){function r(){var e=[],t,n=[];t="SoundManager "+u.version+(!u.html5Only&&u.useHTML5Audio?u.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");u.html5Only?u.html5PollingInterval&&e.push("html5PollingInterval ("+u.html5PollingInterval+"ms)"):(u.preferFlash&&e.push("preferFlash"),u.useHighPerformance&&e.push("useHighPerformance"),u.flashPollingInterval&&e.push("flashPollingInterval ("+u.flashPollingInterval+"ms)"),u.html5PollingInterval&&e.push("html5PollingInterval ("+u.html5PollingInterval+"ms)"),u.wmode&&e.push("wmode ("+u.wmode+")"),u.debugFlash&&e.push("debugFlash"),u.useFlashBlock&&e.push("flashBlock"));e.length&&(n=n.concat([e.join(" + ")]));u._wD(t+(n.length?" + "+n.join(", "):""),1);It()}function i(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(T&&N)return!1;if(u.html5Only)return q(),r(),u.oMC=c(u.movieID),b(),N=T=!0,!1;var s=n||u.url,o=u.altURL||s,a=J(),f=ut(),l=null,l=v.getElementsByTagName("html")[0],h,d,m,l=l&&l.dir&&l.dir.match(/rtl/i);e=e===t?u.id:e;q();u.url=nt(rn?s:o);n=u.url;u.wmode=!u.wmode&&u.useHighPerformance?"transparent":u.wmode;null!==u.wmode&&(p.match(/msie 8/i)||!Xt&&!u.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Et.push(U.spcWmode),u.wmode=null);a={name:e,id:e,src:n,quality:"high",allowScriptAccess:u.allowScriptAccess,bgcolor:u.bgColor,pluginspage:sn+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:u.wmode,hasPriority:"true"};u.debugFlash&&(a.FlashVars="debug=1");u.wmode||delete a.wmode;if(Xt)s=v.createElement("div"),d=['<object id="'+e+'" data="'+n+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+sn+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',i("movie",n),i("AllowScriptAccess",u.allowScriptAccess),i("quality",a.quality),u.wmode?i("wmode",u.wmode):"",i("bgcolor",u.bgColor),i("hasPriority","true"),u.debugFlash?i("FlashVars",a.FlashVars):"","</object>"].join("");else for(h in s=v.createElement("embed"),a)a.hasOwnProperty(h)&&s.setAttribute(h,a[h]);Y();f=ut();if(a=J())if(u.oMC=c(u.movieID)||v.createElement("div"),u.oMC.id)m=u.oMC.className,u.oMC.className=(m?m+" ":"movieContainer")+(f?" "+f:""),u.oMC.appendChild(s),Xt&&(h=u.oMC.appendChild(v.createElement("div")),h.className="sm2-object-box",h.innerHTML=d),N=!0;else{u.oMC.id=u.movieID;u.oMC.className="movieContainer "+f;h=f=null;u.useFlashBlock||(u.useHighPerformance?f={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(f={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},l&&(f.left=Math.abs(parseInt(f.left,10))+"px")));Vt&&(u.oMC.style.zIndex=1e4);if(!u.debugFlash)for(m in f)f.hasOwnProperty(m)&&(u.oMC.style[m]=f[m]);try{Xt||u.oMC.appendChild(s),a.appendChild(u.oMC),Xt&&(h=u.oMC.appendChild(v.createElement("div")),h.className="sm2-object-box",h.innerHTML=d),N=!0}catch(y){throw Error(st("domError")+" \n"+y.toString())}}T=!0;r();return!0};z=function(){if(u.html5Only)return K(),!1;if(f)return!1;if(!u.url)return A("noURL"),!1;f=u.getMovie(u.id);f||(rt?(Xt?u.oMC.innerHTML=it:u.oMC.appendChild(rt),rt=null,T=!0):K(u.id,u.url),f=u.getMovie(u.id));"function"==typeof u.oninitmovie&&setTimeout(u.oninitmovie,1);qt();return!0};F=function(){setTimeout(I,1e3)};I=function(){var t,n=!1;if(!u.url||pt)return!1;pt=!0;Mt.remove(e,"load",F);if(en&&!Zt)return A("waitFocus"),!1;C||(t=u.getMoviePercent(),0<t&&100>t&&(n=!0));setTimeout(function(){t=u.getMoviePercent();if(n)return pt=!1,u._wD(st("waitSWF")),e.setTimeout(F,1),!1;C||(u._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===t?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(u.debugFlash?" "+st("checkSWF"):""),2),!rn&&t&&(A("localFail",2),u.debugFlash||A("tryDebug",2)),0===t&&u._wD(st("swf404",u.url),1),x("flashtojs",!1,": Timed out"+rn?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"));!C&&tn&&(null===t?u.useFlashBlock||0===u.flashLoadTimeout?(u.useFlashBlock&&ot(),A("waitForever")):!u.useFlashBlock&&St?e.setTimeout(function(){ct("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");u.setup({preferFlash:!1}).reboot();u.didFlashBlock=!0;u.beginDelayedInit()},1):(A("waitForever"),B({type:"ontimeout",ignoreInit:!0})):0===u.flashLoadTimeout?A("waitForever"):tt(!0))},u.flashLoadTimeout)};R=function(){if(Zt||!en)return Mt.remove(e,"focus",R),!0;Zt=tn=!0;A("gotFocus");pt=!1;F();Mt.remove(e,"focus",R);return!0};qt=function(){Et.length&&(u._wD("SoundManager 2: "+Et.join(" "),1),Et=[])};It=function(){qt();var e,t=[];if(u.useHTML5Audio&&u.hasHTML5){for(e in u.audioFormats)u.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+u.html5[e]+(!u.html5[e]&&xt&&u.flash[e]?" (using flash)":u.preferFlash&&u.flash[e]&&xt?" (preferring flash)":u.html5[e]?"":" ("+(u.audioFormats[e].required?"required, ":"")+"and no flash support)"));u._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}};M=function(t){if(C)return!1;if(u.html5Only)return A("sm2Loaded"),C=!0,j(),x("onload",!0),!0;var n=!0,r;if(!u.useFlashBlock||!u.flashLoadTimeout||u.getMoviePercent())C=!0,k&&(r={type:!Ht&&xt?"NO_FLASH":"INIT_TIMEOUT"});u._wD("SoundManager 2 "+(k?"failed to load":"loaded")+" ("+(k?"Flash security/load error":"OK")+")",k?2:1);k||t?(u.useFlashBlock&&u.oMC&&(u.oMC.className=ut()+" "+(null===u.getMoviePercent()?"swf_timedout":"swf_error")),B({type:"ontimeout",error:r,ignoreInit:!0}),x("onload",!1),Q(r),n=!1):x("onload",!0);k||(u.waitForWindowLoad&&!L?(A("waitOnload"),Mt.add(e,"load",j)):(u.waitForWindowLoad&&L&&A("docLoaded"),j()));return n};y=function(){var e,n=u.setupOptions;for(e in n)n.hasOwnProperty(e)&&(u[e]===t?u[e]=n[e]:u[e]!==n[e]&&(u.setupOptions[e]=u[e]))};b=function(){if(C)return A("didInit"),!1;if(u.html5Only)return C||(Mt.remove(e,"load",u.beginDelayedInit),u.enabled=!0,M()),!0;z();try{f._externalInterfaceTest(!1),G(!0,u.flashPollingInterval||(u.useHighPerformance?10:50)),u.debugMode||f._disableDebug(),u.enabled=!0,x("jstoflash",!0),u.html5Only||Mt.add(e,"unload",m)}catch(t){return u._wD("js/flash exception: "+t.toString()),x("jstoflash",!1),Q({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),tt(!0),M(),!1}M();Mt.remove(e,"load",u.beginDelayedInit);return!0};X=function(){if($)return!1;$=!0;y();Y();var e=null,e=null,t=d.toLowerCase();-1!==t.indexOf("sm2-usehtml5audio=")&&(
e="1"===t.charAt(t.indexOf("sm2-usehtml5audio=")+18),Yt&&console.log((e?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),u.setup({useHTML5Audio:e}));-1!==t.indexOf("sm2-preferflash=")&&(e="1"===t.charAt(t.indexOf("sm2-preferflash=")+16),Yt&&console.log((e?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),u.setup({preferFlash:e}));!Ht&&u.hasHTML5&&(u._wD("SoundManager: No Flash detected"+(u.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),u.setup({useHTML5Audio:!0,preferFlash:!1}));Ot();!Ht&&xt&&(Et.push(U.needFlash),u.setup({flashLoadTimeout:1}));v.removeEventListener&&v.removeEventListener("DOMContentLoaded",X,!1);z();return!0};At=function(){"complete"===v.readyState&&(X(),v.detachEvent("onreadystatechange",At));return!0};V=function(){L=!0;Mt.remove(e,"load",V)};W=function(){Qt&&((!u.setupOptions.useHTML5Audio||u.setupOptions.preferFlash)&&Et.push(U.mobileUA),u.setupOptions.useHTML5Audio=!0,u.setupOptions.preferFlash=!1,zt||Wt&&!p.match(/android\s2\.3/i))&&(Et.push(U.globalHTML5),zt&&(u.ignoreFlash=!0),Dt=!0)};W();Bt();Mt.add(e,"focus",R);Mt.add(e,"load",F);Mt.add(e,"load",V);v.addEventListener?v.addEventListener("DOMContentLoaded",X,!1):v.attachEvent?v.attachEvent("onreadystatechange",At):(x("onload",!1),Q({type:"NO_DOM2_EVENTS",fatal:!0}))}var r=null;if(void 0===e.SM2_DEFER||!SM2_DEFER)r=new n;e.SoundManager=n;e.soundManager=r})(window);var pagePlayer=null,swfURL=window.location.protocol+"//"+window.location.host+"/boksmakarna/wp-content/themes/boksmakarna/library/js/soundmanager/swf/";soundManager.setup({debugMode:!0,preferFlash:!1,useFlashBlock:!0,url:swfURL,flashVersion:9});soundManager.onready(function(){pagePlayer=new PagePlayer;pagePlayer.init(typeof PP_CONFIG!="undefined"?PP_CONFIG:null)});