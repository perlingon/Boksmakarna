/*
Bones Scripts File
Author: Eddie Machado

This file should contain any js scripts you want to add to the site.
Instead of calling it in the header or throwing it inside wp_head()
this file will be called automatically in the footer so as not to
slow the page load.

*/// IE8 ployfill for GetComputed Style (for Responsive Script below)
window.getComputedStyle||(window.getComputedStyle=function(e,t){this.el=e;this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;t=="float"&&(t="styleFloat");n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()}));return e.currentStyle[t]?e.currentStyle[t]:null};return this});jQuery(document).ready(function(e){function i(){var t=e(window).scrollTop();t>600?e("#scrolltop-btn").fadeIn(200):e("#scrolltop-btn").fadeOut(200)}function l(){var t=e(window).width();console.log("width: "+t);var n=e(".single-post .entry-content, #tabs .columns");e(".single .entry-content p,.archive .entry-content p,.page-template-default .entry-content").addClass("sweet-justice");if(t<768){e(".media").hide();if(n.hasClass("columnized")){e(".column").each(function(){e(this).fadeOut(200,function(){e(this).children().unwrap();e(this).fadeIn(200)})});n.find("br").remove()}}if(t>768){e(".media").show();e.fn.columnize&&(n.hasClass("columnized")||n.columnize({columns:3,doneFunc:function(){n.addClass("columnized");n.find("p").removeClass("sweet-justice");n.find("p").addClass("sweet-justice");e("#tabs").tabs({active:-1,show:function(t,n){var r=e(this).data("lastOpenedPanel");e(this).data("topPositionTab")||e(this).data("topPositionTab",e(n.panel).position().top);e(n.panel).hide().fadeIn(250);r&&r.toggleClass("ui-tabs-hide").css("position","absolute").css("top","0").fadeOut(250,function(){e(this).css("position","")});e(this).data("lastOpenedPanel",e(n.panel))}});e(".excerpt-read-more").click(function(){e("#tabs").tabs({active:-2});return!1});e(".playlist-nav a").click(function(t){t.preventDefault();e("#tabs").tabs({active:-1});return!1})}}));e(".playlist-nav a").click(function(t){t.preventDefault();var n=e(this).attr("data"),r=e(".playlist.main li."+n+" a");e(".playlist-nav a").removeClass("active");e(this).addClass("active");e(".playlist-nav a.active").each(function(){e(this).toggleClass("playing")});e(".playlist.main li").hide();e(".playlist.main li#"+n).show();var i=e(this).attr("href"),s=e(this).attr("target"),o=e(this).text();window._gaq&&_gaq.push(["_trackEvent","Playlist NavMenu","Clicked",i,,!1]);return!1})}t>=768;t>1030}var t=e(window),n=e(".grid-container"),r=e("img.lazyload");e("#slider a").each(function(){var t=e(this).attr("href"),n=e(this).attr("target"),r=e(this).text();window._gaq&&e(this).click(function(e){e.preventDefault();_gaq.push(["_trackEvent","Slider-Link-Clicks","Clicked",t,,!1]);setTimeout(function(){window.open(t,n?n:"_self")},300)})});e(".playlist a").each(function(){var t=e(this).attr("href"),n=e(this).attr("target"),r=e(this).text();window._gaq&&_gaq.push(["_trackEvent","Player Episodes","Clicked",t,,!1])});e(".buy-link").each(function(){var t=e(this).attr("href"),n=e(this).attr("target"),r=e(this).text();window._gaq&&e(this).click(function(e){e.preventDefault();_gaq.push(["_trackEvent","Buy Button","Clicked",t,,!1]);setTimeout(function(){window.open(t,n?n:"_self")},300)})});window.onscroll=i;e(".scroll").each(function(){thisHref=e(this).find("a").prop("href");thisTitle=e(this).find("a").attr("title");e(this).find("a").prop("href",thisHref+thisTitle)});e.localScroll({hash:!0,axis:"y"});e.localScroll.hash();r.lazyload({effect:"fadeIn",failure_limit:Math.max(r.length-1,0)});var s=responsiveNav("#menu-main",{animate:!0,transition:400,label:"Meny",insert:"after",customToggle:"",openPos:"relative",jsClass:"js",init:function(){},open:function(){},close:function(){}});e(".chosen-select").chosen().change(function(){var t="",r=e("#titles").val(),i=e("#writers").val(),s=e("#genres").val();r===null&&(r="");i===null&&(i="");s===null&&(s="");var o=t.concat(r,i,s),u=e.param({filter:o});e.bbq.pushState(u);o===""?n.isotope({filter:"*"}):n.isotope({filter:o})});n.isotope({itemSelector:".grid-item",layoutMode:"fitRows",onLayout:function(){t.trigger("scroll")},getSortData:{title:function(e){var t="Titel";return e.find("h3").text()},writer:function(e){var t="Författare";return e.find(".writer-tag").text()},genre:function(e){var t="Genre";return e.find(".genre-tag").text()},date:function(e){var t="Datum";return parseInt(e.find(".timestamp").text(),10)}}});var o=e(".sort-by a").eq(0),u=e(".sort-order a").eq(0),a=["Äldst > Nyast","A > Ö"],f=["Nyast > Äldst","Ö > A"];o.click(function(){this.className={date:"title",title:"writer",writer:"genre",genre:"date"}[this.className];if(u.hasClass("asc"))var t=!0;else var t=!1;if(e(this).hasClass("title")){sortName="title";n.isotope({sortBy:sortName,sortAscending:t});e(this).html("Titel");e(this).attr("href","#"+sortName);var r=e.param({sortBy:sortName});e.bbq.pushState(r)}if(e(this).hasClass("writer")){sortName="writer";n.isotope({sortBy:sortName,sortAscending:t});e(this).html("Författare");e(this).attr("href","#"+sortName);var r=e.param({sortBy:sortName});e.bbq.pushState(r)}if(e(this).hasClass("genre")){sortName="genre";n.isotope({sortBy:sortName,sortAscending:t});e(this).html("Genre");e(this).attr("href","#"+sortName);var r=e.param({sortBy:sortName});e.bbq.pushState(r)}if(e(this).hasClass("date")){sortName="date";n.isotope({sortBy:sortName,sortAscending:t});e(this).html("Datum");e(this).attr("href","#"+sortName);var r=e.param({sortBy:sortName});e.bbq.pushState(r);u.parent().removeClass("abc");u.parent().addClass("date");u.hasClass("asc")?u.html(a[0]):u.html(f[0])}else{u.parent().removeClass("date");u.parent().addClass("abc");u.hasClass("asc")?u.html(a[1]):u.html(f[1])}return!1});e("body").on("click",".sort-order a",function(){if(!e(this).attr("data-toggled")||e(this).attr("data-toggled")=="off"){e(this).attr("data-toggled","on");var t=o.attr("href").slice(1);e(this).removeClass("desc");e(this).addClass("asc");n.isotope({sortBy:t,sortAscending:!0});u.parent().hasClass("date")?e(this).html(a[0]):e(this).html(a[1])}else if(e(this).attr("data-toggled")=="on"){e(this).attr("data-toggled","off");var t=o.attr("href").slice(1);e(this).removeClass("asc");e(this).addClass("desc");n.isotope({sortBy:t,sortAscending:!1});u.parent().hasClass("date")?e(this).html(f[0]):e(this).html(f[1])}return!1});e(".grid-item .tags a, .filter").click(function(){var t=e(this).attr("data-filter"),r=e(".sort-by li a").first().attr("href").slice(1);if(e(".sort-order a").first().hasClass("asc"))var i=!0;else var i=!1;n.isotope({filter:t,sortBy:r,sortAscending:i});var s=e.param({filter:t});e.bbq.pushState(s);return!1});e(window).bind("hashchange",function(t){var r=e.deparam.fragment();n.isotope(r);if(t.fragment=="")n.isotope({filter:"*"});else{n.isotope(r);if(r.sortBy){var i=r.sortBy;if(r.sortBy=="title")var s="Titel";if(r.sortBy=="writer")var s="Författare";if(r.sortBy=="genre")var s="Genre";if(r.sortBy=="date")var s="Datum";o.removeClass();o.addClass(i);o.attr("href","#"+i);o.html(s)}}}).trigger("hashchange");l();e(window).resize(_.debounce(function(){l()},500))});(function(e){function c(){n.setAttribute("content",s);o=!0}function h(){n.setAttribute("content",i);o=!1}function p(t){l=t.accelerationIncludingGravity;u=Math.abs(l.x);a=Math.abs(l.y);f=Math.abs(l.z);!e.orientation&&(u>7||(f>6&&a<8||f<8&&a>6)&&u>5)?o&&h():o||c()}if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1))return;var t=e.document;if(!t.querySelector)return;var n=t.querySelector("meta[name=viewport]"),r=n&&n.getAttribute("content"),i=r+",maximum-scale=1",s=r+",maximum-scale=10",o=!0,u,a,f,l;if(!n)return;e.addEventListener("orientationchange",c,!1);e.addEventListener("devicemotion",p,!1)})(this);