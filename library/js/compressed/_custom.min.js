/*
Bones Scripts File
Author: Eddie Machado

This file should contain any js scripts you want to add to the site.
Instead of calling it in the header or throwing it inside wp_head()
this file will be called automatically in the footer so as not to
slow the page load.

*/// IE8 ployfill for GetComputed Style (for Responsive Script below)
window.getComputedStyle||(window.getComputedStyle=function(e,t){this.el=e;this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;t=="float"&&(t="styleFloat");n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()}));return e.currentStyle[t]?e.currentStyle[t]:null};return this});jQuery(document).ready(function(e){function f(){var t=e(window).width();t<481;if(t>481){e.fn.columnize&&e(".single-post .entry-content, .page-template-default .entry-content").columnize({columns:3});e.fn.columnize&&e("#tabs .columns").columnize({columns:3,doneFunc:function(){e("#tabs").tabs({active:1,show:function(t,n){var r=e(this).data("lastOpenedPanel");e(this).data("topPositionTab")||e(this).data("topPositionTab",e(n.panel).position().top);e(n.panel).hide().fadeIn(250);r&&r.toggleClass("ui-tabs-hide").css("position","absolute").css("top","0").fadeOut(250,function(){e(this).css("position","")});e(this).data("lastOpenedPanel",e(n.panel))}});e(".excerpt-read-more").click(function(){e("#tabs").tabs({active:0});return!1});e(".playlist-nav a").click(function(){e("#tabs").tabs({active:1})})}});e(".playlist-nav a").click(function(t){t.preventDefault();var n=e(this).attr("href").slice(1),r=e(".playlist.main li."+n+" a");e(".playlist-nav a").removeClass("active");e(this).addClass("active");e(".playlist.main li").hide();e(".playlist.main li#"+n).show()});e("body").on("click",".playlist-nav a.active",function(){if(!e(this).attr("data-toggled")||e(this).attr("data-toggled")=="off"){e(this).attr("data-toggled","on");soundManager.supported()&&soundManager.pauseAll()}else if(e(this).attr("data-toggled")=="on"){e(this).attr("data-toggled","off");soundManager.supported()&&soundManager.resumeAll()}})}t>=768;t>1030}var t=e(window),n=e(".grid-container"),r=e("img.lazyload");r.lazyload({effect:"fadeIn",failure_limit:Math.max(r.length-1,0)});var i=responsiveNav("#menu-main",{animate:!0,transition:400,label:"Meny",insert:"after",customToggle:"",openPos:"relative",jsClass:"js",init:function(){},open:function(){},close:function(){}});e(".chosen-select").chosen().change(function(){var t="",r=e("#titles").val(),i=e("#writers").val(),s=e("#genres").val();r===null&&(r="");i===null&&(i="");s===null&&(s="");var o=t.concat(r,i,s),u=e.param({filter:o});e.bbq.pushState(u);o===""?n.isotope({filter:"*"}):n.isotope({filter:o})});n.isotope({itemSelector:".grid-item",layoutMode:"fitRows",onLayout:function(){t.trigger("scroll")},getSortData:{title:function(e){return e.find("h3").text()},writer:function(e){return e.find(".writer-tag").text()},genre:function(e){return e.find(".genre-tag").text()},date:function(e){return parseInt(e.find(".timestamp").text(),10)}}});var s=e(".sort-by a").eq(0),o=e(".sort-order a").eq(0),u=["Äldst > Nyast","A > Ö"],a=["Nyast > Äldst","Ö > A"];s.click(function(){this.className={date:"title",title:"writer",writer:"genre",genre:"date"}[this.className];if(o.hasClass("asc"))var t=!0;else var t=!1;if(e(this).hasClass("title")){sortName="title";n.isotope({sortBy:sortName,sortAscending:t});e(this).html("Titel");e(this).attr("href","#"+sortName);var r=e.param({sortBy:sortName});e.bbq.pushState(r)}if(e(this).hasClass("writer")){sortName="writer";n.isotope({sortBy:sortName,sortAscending:t});e(this).html("Författare");e(this).attr("href","#"+sortName);var r=e.param({sortBy:sortName});e.bbq.pushState(r)}if(e(this).hasClass("genre")){sortName="genre";n.isotope({sortBy:sortName,sortAscending:t});e(this).html("Genre");e(this).attr("href","#"+sortName);var r=e.param({sortBy:sortName});e.bbq.pushState(r)}if(e(this).hasClass("date")){sortName="date";n.isotope({sortBy:sortName,sortAscending:t});e(this).html("Datum");e(this).attr("href","#"+sortName);var r=e.param({sortBy:sortName});e.bbq.pushState(r);o.parent().removeClass("abc");o.parent().addClass("date");o.hasClass("asc")?o.html(u[0]):o.html(a[0])}else{o.parent().removeClass("date");o.parent().addClass("abc");o.hasClass("asc")?o.html(u[1]):o.html(a[1])}return!1});e("body").on("click",".sort-order a",function(){if(!e(this).attr("data-toggled")||e(this).attr("data-toggled")=="off"){e(this).attr("data-toggled","on");var t=s.attr("href").slice(1);e(this).removeClass("desc");e(this).addClass("asc");n.isotope({sortBy:t,sortAscending:!0});o.parent().hasClass("date")?e(this).html(u[0]):e(this).html(u[1])}else if(e(this).attr("data-toggled")=="on"){e(this).attr("data-toggled","off");var t=s.attr("href").slice(1);e(this).removeClass("asc");e(this).addClass("desc");n.isotope({sortBy:t,sortAscending:!1});o.parent().hasClass("date")?e(this).html(a[0]):e(this).html(a[1])}});e(".grid-item .tags a, .filter").click(function(){var t=e(this).attr("data-filter"),r=e(".sort-by li.active a").first().attr("href").slice(1);if(e(".sort-order a").first().hasClass("asc"))var i=!0;else var i=!1;n.isotope({filter:t,sortBy:r,sortAscending:i});var s=e.param({filter:t});e.bbq.pushState(s);return!1});f();e(window).one("resize",function(){})});(function(e){function c(){n.setAttribute("content",s);o=!0}function h(){n.setAttribute("content",i);o=!1}function p(t){l=t.accelerationIncludingGravity;u=Math.abs(l.x);a=Math.abs(l.y);f=Math.abs(l.z);!e.orientation&&(u>7||(f>6&&a<8||f<8&&a>6)&&u>5)?o&&h():o||c()}if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1))return;var t=e.document;if(!t.querySelector)return;var n=t.querySelector("meta[name=viewport]"),r=n&&n.getAttribute("content"),i=r+",maximum-scale=1",s=r+",maximum-scale=10",o=!0,u,a,f,l;if(!n)return;e.addEventListener("orientationchange",c,!1);e.addEventListener("devicemotion",p,!1)})(this);