// @codekit-append /libs/sweet-justice.js
/* **********************************************
     Begin sweet-justice.js
********************************************** *//*
 * Sweet Justice: beautiful justified text.
 *
 * Include this file at the bottom of your pages
 * and it will hyphenate and justify your text.
 * The script pays attention to elements with
 * any of these three CSS classes:
 *
 *   sweet-justice:  Hyphenated and justified
 *   sweet-hypens:   Hyphenation only
 *   justice-denied: No hypens or justification.
 *                   This is useful for child nodes.
 *
 * Hyphenation is accomplished by inserting soft
 * hyphen characters (0x00AD) into long words.
 *
 * Requires either jQuery or YUI3.
 *
 * BSD license: Share and enjoy.
 * @author carlos@bueno.org 23 April 2010
 * github.com/aristus/sweet-justice
 *
 */!function(){function n(e){var r=e.childNodes;for(var s=0;s<r.length;s++){var o=r[s];switch(o.nodeType){case 3:o.nodeValue=i(o.nodeValue);break;case 1:!t[o.nodeName.toLowerCase()]&&o.className.indexOf("justice-denied")===-1&&n(o)}}}function i(e){var t=e.split(r);for(var n=0;n<t.length;n++)s(t[n])&&(t[n]=d(t[n]));return t.join(" ")}function s(e){return/\w{6,}/.test(e)&&!/^[0-9\&]|@|\-|\u00AD/.test(e)}function h(e){return e.replace(f,"$1­$2").replace(l,"$1­$2").replace(c,"$1")}function d(e){var t=p.exec(e),n=[];t[2]&&n.push(t[2]);t[3]&&n.push(t[3].replace(f,"$1­$2"));t[4]&&n.push(t[4]);return(t[1]||"")+n.join("­")+(t[5]||"")}function v(e){var t=document.getElementsByTagName("body")[0],n=/(?:\u00AD|\&#173;|\&shy;)/g,r=document.createElement("div");r.style.overflow="hidden";r.style.position="absolute";r.style.top="-5000px";r.style.height="1px";t.appendChild(r);if(typeof window.getSelection!="undefined"){sel=window.getSelection();var i=sel.getRangeAt(0);r.appendChild(i.cloneContents());r.innerHTML=r.innerHTML.replace(n,"");sel.selectAllChildren(r);window.setTimeout(function(){r.parentNode.removeChild(r);typeof window.getSelection().setBaseAndExtent!="undefined"&&sel.setBaseAndExtent(i.startContainer,i.startOffset,i.endContainer,i.endOffset)},0)}else{sel=document.selection;var i=sel.createRange();r.innerHTML=i.htmlText.replace(n,"");var s=t.createTextRange();s.moveToElementText(r);s.select();window.setTimeout(function(){r.parentNode.removeChild(r);i.text!==""&&i.select()},0)}return}function m(){jQuery(".sweet-justice, .sweet-hyphens").each(function(e,t){n(t)});jQuery("body").bind("copy",v)}function g(e){e.all(".sweet-justice, .sweet-hyphens").each(function(t){n(e.Node.getDOMNode(t))});e.Node.DOM_EVENTS.copy=1;e.one("body").on("copy",v)}var e=6,t={code:!0,pre:!0,abbr:!0},r=/[ \s\n\r\v\t]+/,o="aeiouyAEIOUYẚÁáÀàĂăẮắẰằẴẵẲẳÂâẤấẦầẪẫẨẩǍǎÅåǺǻÄäǞǟÃãȦȧǠǡĄąĀāẢảȀȁȂȃẠạẶặẬậḀḁȺⱥǼǽǢǣÉƏƎǝéÈèĔĕÊêẾếỀềỄễỂểĚěËëẼẽĖėȨȩḜḝĘęĒēḖḗḔḕẺẻȄȅȆȇẸẹỆệḘḙḚḛɆɇɚɝÍíÌìĬĭÎîǏǐÏïḮḯĨĩİiĮįĪīỈỉȈȉȊȋỊịḬḭIıƗɨÓóÒòŎŏÔôỐốỒồỖỗỔổǑǒÖöȪȫŐőÕõṌṍṎṏȬȭȮȯȰȱØøǾǿǪǫǬǭŌōṒṓṐṑỎỏȌȍȎȏƠơỚớỜờỠỡỞởỢợỌọỘộƟɵÚúÙùŬŭÛûǓǔŮůÜüǗǘǛǜǙǚǕǖŰűŨũṸṹŲųŪūṺṻỦủȔȕȖȗƯưỨứỪừỮữỬửỰựỤụṲṳṶṷṴṵɄʉÝýỲỳŶŷY̊ẙŸÿỸỹẎẏȲȳỶỷỴỵʏɎɏƳƴ",u="[^"+o+"]",a="["+o+"]",f=new RegExp("("+a+u+")("+u+a+")","g"),l=new RegExp("(.{2,4}"+a+")"+"("+u+")","g"),c=/\u00AD(.?)|$\u00AD(.{0,2}\w+)$/,p=/^(\W*)(anti|auto|ab|an|ax|al|as|bi|bet|be|contra|cat|cath|cir|cum|cog|col|com|con|cor|could|co|desk|de|dis|did|dif|di|eas|every|ever|extra|ex|end|en|em|epi|evi|func|fund|fin|hyst|hy|han|il|in|im|ir|just|jus|loc|lig|lit|li|mech|manu|man|mal|mis|mid|mono|multi|mem|micro|non|nano|ob|oc|of|opt|op|over|para|per|post|pre|peo|pro|retro|rea|re|rhy|should|some|semi|sen|sol|sub|suc|suf|super|sup|sur|sus|syn|sym|syl|tech|trans|tri|typo|type|uni|un|van|vert|with|would|won)?(.*?)(weens?|widths?|icals?|ables?|ings?|tions?|ions?|ies|isms?|ists?|ful|ness|ments?|ly|ify|ize|ise|ity|en|ers?|ences?|tures?|ples?|als?|phy|puts?|phies|ry|ries|cy|cies|mums?|ous|cents?)?(\W*)$/i;try{var y=document.createElement("style");y.type="text/css";var b=".sweet-justice {text-align:justify;text-justify:newspaper} .justice-denied {text-align:left;text-justify:normal}";!!window.attachEvent&&!window.opera?y.styleSheet.cssText=b:y.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(y)}catch(w){}window.jQuery?jQuery(window).load(m):window.YUI&&YUI().use("node",function(e){g(e)})}();